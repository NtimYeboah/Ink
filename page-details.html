<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>ntim.dev</title>
        <link href="/tailwind.css" rel="stylesheet">
        <script>
            // It's best to inline this in `head` to avoid FOUC (flash of unstyled content) when changing pages or themes
            if (
                localStorage.getItem('color-theme') === 'dark' ||
                (!('color-theme' in localStorage) &&
                window.matchMedia('(prefers-color-scheme: dark)').matches)
            ) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        </script>
    </head>
    <body class="antialiased bg-white dark:bg-cyan-950 dark:text-gray-200 scroll-smooth">
        <header class="py-2 border-b bg-white dark:bg-gray-950 dark:border-none">
            <nav class="w-4/6 flex flex-row justify-between items-center mx-auto">
                <div class="basis-4/5 md:basis-3/5 lg:basis-5/6">
                    <a href="/" class="font-mono font-bold dark:text-gray-400">ntim.dev</a>
                </div>
                <div class="hidden md:block md:basis-1/5 basis-1/4 lg:basis-1/6">
                    <ul class="flex items-center gap-6">
                        <li><a href="/blog" class="font-sans font-bold py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">Blog</a></li>
                        <li><a href="/projects" class="font-bold py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">Projects</a></li>
                        <li><a href="/about" class="font-bold py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">About</a></li>
                    </ul>
                </div>
                <div class="basis-1/5 pr-3 md:pr-0 border-r md:border-r-0 dark:border-r-gray-400 md:basis-1/5 lg:basis-1/6 ">
                    <ul class="flex justify-end items-center gap-8">
                        <li>
                            <button
                                id="search-icon"
                                type="button"
                                class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2"
                            >
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 font-bold dark:text-gray-400">
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z" />
                                  </svg>
                            </button>
                        </li>
                        <li>
                            <button
                                id="theme-toggle"
                                type="button"
                                class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2"
                            >
                                <svg
                                    id="theme-toggle-dark-icon"
                                    class="w-5 h-5 hidden"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                    d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"
                                    ></path>
                                </svg>
                                <svg
                                    id="theme-toggle-light-icon"
                                    class="w-5 h-5 hidden"
                                    fill="currentColor"
                                    viewBox="0 0 20 20"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                    d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z"
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    ></path>
                                </svg>
                            </button>
                        </li>
                    </ul>
                </div>

                <div class="basis-1/12 md:hidden lg:hidden">
                    <div class="flex justify-end">
                        <svg id="sm-menu-icon" onClick="onToggleMenuIcon(this)" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 font-bold dark:text-gray-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                        </svg>
                        <svg id="sm-cancel-icon" onClick="onToggleMenuIcon(this)" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6 hidden dark:text-gray-400">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </div>
                </div>
            </nav>
        </header>
        <section id="sm-menu" class="hidden w-full shadow-sm z-50 absolute bg-slate-100 md:hidden lg:hidden 2xl:hidden dark:bg-cyan-950">
            <ul class="flex flex-col items-end">
                <li class="py-2 border-b dark:border-b-gray-400 w-full"><p class="float-right pr-5"><a href="/" class="font-sans font-bold py-4 border-gray-300 dark:text-slate-100">Blog</a></p></li>
                <li class="py-2 w-full"><p class="float-right pr-5"><a href="/projects" class="font-bold py-4 border-gray-300 dark:text-slate-100">Projects</a></p></li>
                <li class="py-2 border-t dark:border-t-gray-400 w-full"><p class="float-right pr-5"><a href="/about.html" class="font-bold py-4 border-gray-300 dark:text-slate-100">About</a></p></li>
            </ul>
        </section>

        <!-- Post header-->
        <section class="md:w-6/12 md:mx-auto">
            <div class="flex flex-col items-center">
                <p class="text-gray-500 m-5">November 21, 2023</p>
                <h1 class="font-extrabold text-2xl m-5 dark:text-slate-100">Stop mocking about: Event Dispatcher</h1>
                <div class="flex flex-row gap-5 m-5">
                    <div class="bg-slate-200 p-2 dark:bg-cyan-900">
                        <span class="dark:text-gray-200">PHPUNIT</span>
                    </div>
                    <div class="bg-slate-200 p-2 dark:bg-cyan-900">
                        <span class="dark:text-gray-200">Stop Mocking About</span>
                    </div>
                </div>
            </div>
        </section>
        <!-- End of Post header-->

        <!-- Main content -->
        <section class="md:w-6/12 md:mx-auto">
            <!-- Main content container -->
            <div class="flex flex-col px-5">
                <picture>
                    <img class="rounded-md w-full md:h-96 object-cover object-center" src="/assets/img/stop-mocking-about-event-dispatcher.jpg" alt="feature-image">
                </picture>

                <!-- Main conent -->
                <div class="md:w-10/12 md:mx-auto font-sans text-lg mt-5 dark:text-gray-200 font-medium">
                    <p>
                        I don't like mocks in unit testing (I use them, but don't like them).
                        It often results in tests that only assure some specific method was called
                        with certain parameters. It is this approach that may lead some to think
                        that writing tests is writing the code twice, and therefore a waste of time.
                        It also leaves a lot of room for errors, missing tests, or broken tests when
                        the implementation is changed.
                    </p>

                    <p>
                        That's why I wanted to make a miniseries on replacing mocks with real
                        implementations by providing some semi-real-world examples.
                    </p>

                    <p>
                        In this post we'll be looking into testing Event Dispatchers & Event Listeners.
                        First we'll use mocks and check out some of their shortcomings.
                        Then we'll rewrite to real implementations and see what makes them better.
                    </p>

                    <p>
                        This test works, and it has full test coverage. But what are we actually testing here?
                        Because we've mocked the EventDispatcherInterface, we need to tell the mock what to expect and return:
                    </p>

                    <p>
                        It will receive exactly one call to dispatch with a GetTitleEvent that has The title as a value,
                        and it needs to return that event; because we will call getTitle() on it.
                    </p>

                    <p>
                        So we are mostly building a fake event dispatcher, and testing if it gets the correct parameters.
                        Only then can we test the actual function of this test Importer::getPostTitle() and
                        assert it returns the proper value.
                    </p>
                        
                    <p>
                        So more than half of this test is making sure the getPostTitle method calls some exact code;
                        and sets up the world so that the actual test can be performed.
                        And it doesn't even listen to the event, or change the title.
                    </p>
                </div>
                <!-- Main content-->
            </div>
            <!-- End of main content container-->
        </section>
        <!-- End of main content -->

        <!-- Share plugin -->
        <section class="md:w-6/12 md:mx-auto m-5 border-b-2 border-t-2 border-slate-200 py-9">
            <div class="flex flex-col items-center space-y-5 text-slate-500">
                <div>
                    <h3 class="uppercase text-base font-bold dark:dark:text-gray-200">Share this article</h3>
                </div>
                <div>
                    <div class="flex flex-row gap-8">
                        <a href="" class="hover:text-slate-900 dark:hover:text-gray-200">
                            <div class="flex flex-row gap-2">
                                <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                                </svg>
                                <span>Twitter</span>
                            </div>
                        </a>

                        <a href="" class="hover:text-slate-900 dark:hover:text-gray-200">
                            <div class="flex flex-row gap-2">
                                <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm3 8h-1.35c-.538 0-.65.221-.65.778v1.222h2l-.209 2h-1.791v7h-3v-7h-2v-2h2v-2.308c0-1.769.931-2.692 3.029-2.692h1.971v3z"></path>
                                </svg>
                                <span>Facebook</span>
                            </div>
                        </a>

                        <a href="" class="hover:text-slate-900 dark:hover:text-gray-200">
                            <div class="flex flex-row gap-2">
                                <svg fill="currentColor" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm-2 16h-2v-6h2v6zm-1-6.891c-.607 0-1.1-.496-1.1-1.109 0-.612.492-1.109 1.1-1.109s1.1.497 1.1 1.109c0 .613-.493 1.109-1.1 1.109zm8 6.891h-1.998v-2.861c0-1.881-2.002-1.722-2.002 0v2.861h-2v-6h2v1.093c.872-1.616 4-1.736 4 1.548v3.359z"></path>
                                </svg>
                                <span>LinkedIn</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </section>
        <!-- End of share plugin -->

        <!-- Comments section -->
        <section class="md:w-6/12 md:mx-auto giscus mt-5 px-4 md:px-0">
        </section>
        <!-- End of comments section-->

        <!-- Newsletter section -->
        <section id="action" class="bg-cyan-900 p-5 mt-5">
            <div class="md:w-9/12 md:mx-auto flex flex-col md:flex md:flex-row md:gap-3">
                <div class="mb-5 md:basis-1/2">
                    <h4 class="font-semibold text-xl text-slate-200">Want to know about future blog posts?</h4>
                    <h4 class="font-semibold text-xl text-cyan-500">Then sign up for my newsletter!</h4>
                </div>
                <div class="mb-5 md:basis-1/2">
                    <div>
                        <input type="email" placeholder="Enter your email" class="w-3/4 p-2 rounded text-sm">
                        <button class=" bg-sky-700 text-white p-2 rounded shadow-md text-sm">Notify Me</button>
                    </div>
                    <div class="mt-3">
                        <p class="text-xs text-cyan-200">I'll only send mails if I actually have something to tell.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- End of Newsletter section -->

        <!-- Posts upselling -->
        <section class="md:w-6/12 md:mx-auto mt-5">
            <div class="flex flex-col items-center">
                <h1 class="font-extrabold text-2xl mb-5 dark:text-slate-100">You might find this interesting too</h1>
            </div>
            <div class="flex flex-col items-center md:flex md:flex-row">
                <article class="md:basis-1/3 p-4 hover:bg-slate-100 mb-4 dark:hover:bg-slate-900">
                    <a href="/page-details.html">
                        <picture>
                            <img class="w-full md:h-44 h-64 object-cover object-center rounded mb-2" src="/assets/img/heaps-and-heapsort-in-php.jpg" alt="">
                        </picture>
                        <h3 class="font-extrabold dark:text-slate-100">Stop mocking about: Event Dispatcher</h3>
                        <h4 class="font-extrabold text-xs text-gray-500 mb-4 dark:text-slate-400">PHPUNIT</h4>
                        <p class="text-sm text-gray-600 dark:text-slate-400">How to replace your mocked event dispatcher with a real one, and why.</p>
                    </a>
                </article>

                <article class="md:basis-1/3 p-4 hover:bg-slate-100 mb-4 dark:hover:bg-slate-900">
                    <a href="/page-details.html">
                        <picture>
                            <img class="w-full md:h-44 h-64 object-cover object-center rounded mb-2" src="/assets/img/middleware-pattern-in-php.webp" alt="">
                        </picture>
                        <h3 class="font-extrabold dark:text-slate-100">Stop mocking about: Event Dispatcher</h3>
                        <h4 class="font-extrabold text-xs text-gray-500 mb-4 dark:text-slate-400">PHPUNIT</h4>
                        <p class="text-sm text-gray-600 dark:text-slate-400">How to replace your mocked event dispatcher with a real one, and why.</p>
                    </a>
                </article>

                <article class="md:basis-1/3 p-4 hover:bg-slate-100 mb-4 dark:hover:bg-slate-900">
                    <a href="/blog/post-1">
                        <picture>
                            <img class="w-full md:h-44 h-64 object-cover object-center rounded mb-2" src="/assets/img/visitor-pattern.jpg" alt="">
                        </picture>
                        <h3 class="font-extrabold dark:text-slate-100">Stop mocking about: Event Dispatcher</h3>
                        <h4 class="font-extrabold text-xs text-gray-500 mb-4 dark:text-slate-400">PHPUNIT</h4>
                        <p class="text-sm text-gray-600 dark:text-slate-400">How to replace your mocked event dispatcher with a real one, and why.</p>
                    </a>
                </article>
            </div>
        </section>
        <!-- End of post upselling -->

        <footer class="bg-black p-5">
            <div class="flex flex-row justify-start">
                <div class="w-2/6 md:w-4/6">
                    <p class="text-slate-400 text-sm">&copy; 2023 <a href="/">ntim.dev</a></p>
                </div>
                <div class="w-2/6 md:w-1/6">
                    <ul class="flex justify-between gap-3 md:gap-0">
                        <li>
                            <a href="/blog" class="font-sans text-slate-400 font-medium py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">Blog</a>
                        </li>
                        <li>
                            <a href="/projects" class="text-slate-400 font-medium py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">Projects</a>
                        </li>
                        <li>
                            <a href="/about" class="text-slate-400 font-medium py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">About</a>
                        </li>
                    </ul>
                </div>
                <div class="w-2/6 md:w-1/6">
                    <ul class="flex flex-row justify-end gap-6 md:gap-12">
                        <li>
                            <a href="https://twitter.com/ntimdev" target="_blank" class="text-slate-400 font-medium py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">
                                <svg
                                    fill="currentColor"
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                >
                                    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm6.066 9.645c.183 4.04-2.83 8.544-8.164 8.544-1.622 0-3.131-.476-4.402-1.291 1.524.18 3.045-.244 4.252-1.189-1.256-.023-2.317-.854-2.684-1.995.451.086.895.061 1.298-.049-1.381-.278-2.335-1.522-2.304-2.853.388.215.83.344 1.301.359-1.279-.855-1.641-2.544-.889-3.835 1.416 1.738 3.533 2.881 5.92 3.001-.419-1.796.944-3.527 2.799-3.527.825 0 1.572.349 2.096.907.654-.128 1.27-.368 1.824-.697-.215.671-.67 1.233-1.263 1.589.581-.07 1.135-.224 1.649-.453-.384.578-.87 1.084-1.433 1.489z"></path>
                                </svg>
                            </a>
                        </li>
                        <li>
                            <a href="https://github.com/NtimYeboah" target="_blank" class="text-slate-400 font-medium py-4 hover:border-b-4 border-gray-300 dark:text-gray-400">
                                <svg
                                    fill="currentColor"
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="20"
                                    height="20"
                                    viewBox="0 0 24 24"
                                >
                                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"></path>
                                </svg>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </footer>

    <script src="assets/js/main.js"></script>
    <script>
        function onToggleMenuIcon(element) {
            showMenu = element.id === 'sm-menu-icon' ? true : false;
            element.classList.add('hidden')

            menuForSmallScreens = document.querySelector('#sm-menu');

            if (showMenu) {
                cancelMenuIcon = document.querySelector('#sm-cancel-icon');
                cancelMenuIcon.classList.remove('hidden')

                menuForSmallScreens.classList.remove('hidden')
            } else {
                showMenuIcon = document.querySelector('#sm-menu-icon');
                showMenuIcon.classList.remove('hidden')

                menuForSmallScreens.classList.add('hidden')
            }
        }
    </script>
    <script src="https://giscus.app/client.js"
        data-repo="NtimYeboah/ntim.dev"
        data-repo-id="R_kgDOKwH1Gg"
        data-category="Announcements"
        data-category-id="DIC_kwDOKwH1Gs4CbHnQ"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="bottom"
        data-theme="preferred_color_scheme"
        data-lang="en"
        data-loading="lazy"
        crossorigin="anonymous"
        async>
    </script>
    </body>
</html>